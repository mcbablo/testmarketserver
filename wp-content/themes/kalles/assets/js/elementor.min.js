class KallesMapWidgetHandle extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{container:".kalles-map"}}}getDefaultElements(){const e=this.getSettings("selectors");return{$container:this.$element.find(e.container)}}kallesMapBox(){var e=this,t=[],n=e.elements.$container,o=n.data("locations"),a=o.localtions,l=o.token,s=mapboxSdk({accessToken:l}),r=n.find(".kalles-map__content").attr("id");return mapboxgl.accessToken=l,jQuery.each(a,function(a,d){console.log(d),s.geocoding.forwardGeocode({query:d,autocomplete:!1,limit:1}).send().then(function(s){if(s&&s.body&&s.body.features&&s.body.features.length){var i=s.body.features[0],c=n.find(".kalles-map__list .kalles-map__list--item");c.eq(a).attr("data-latitude",i.center[0]),c.eq(a).attr("data-longitude",i.center[1]);var m={type:"Feature",properties:{description:c.eq(a).html(),icon:"theatre"},geometry:{type:"Point",coordinates:[i.center[0],i.center[1]]}};if(0==a){var p=[i.center[0],i.center[1]],u=d;e.load_map(r,o,c,l,t,p,u)}t.push(m),a++}})}),t}load_map(e,t,n,o,a,l,s){var r=new mapboxgl.Map({container:e,style:"mapbox://styles/mapbox/"+t.style,center:l,zoom:t.zom}),d=new MapboxGeocoder({accessToken:mapboxgl.accessToken});r.addControl(d),r.on("load",function(){!function(e,t){const n=document.getElementsByClassName("mapboxgl-popup");n[0]&&n[0].remove();new mapboxgl.Popup({closeOnClick:!1}).setLngLat(e).setHTML(`<h3>${t}</h3>`).addTo(r)}(l,s)}),n.on("click",function(){var e=jQuery(this).data("latitude"),n=jQuery(this).data("longitude");r.flyTo({center:[e,n],zoom:t.zom,essential:!0,speed:3,curve:1})})}onInit(){super.onInit(),this.kallesMapBox()}}jQuery(window).on("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/kalles-map.default",e=>{elementorFrontend.elementsHandler.addHandler(KallesMapWidgetHandle,{$element:e})})});