!function(e){"use strict";var t=e("body");The4Kalles.wcInitSidebarFilter=function(){t.on("click",".filter-trigger.sidebar",function(a){a.preventDefault(),t.toggleClass("slidebar-opened");var l=e(".mask-overlay");l.addClass("mask_opened"),e(".mask-overlay, .close-filter").on("click",function(){t.removeClass("slidebar-opened"),l.removeClass("mask_opened")})}),t.on("click",".filter-trigger.top",function(t){t.preventDefault(),e(this).toggleClass("opened");var a=e("#section-nt_filter");a.is(":hidden")?a.stop().slideDown(200):a.slideUp(200)}),t.on("click",".filter-sidebar .nt_filter_block a",function(a){t.hasClass("slidebar-opened")&&(t.removeClass("slidebar-opened"),e(".mask-overlay").remove())}),t.on("click",".filter-top.nt_filter_block a, .result_clear a, .is_pjax_item, .price_slider_wrapper .button",function(t){e("#section-nt_filter").slideUp(200)}),t.on("click",".filter-dropdown__title",function(a){var l=e(this);a.preventDefault(),l.hasClass("opened")?(l.removeClass("opened"),l.next().slideUp(100)):(l.addClass("opened"),l.next().slideDown(100)),t.on("click",function(t){var a=t.target;l.hasClass("opened")&&!e(a).is(l)&&0==e(a).closest(".filter-dropdown").find(l).length&&(l.removeClass("opened"),l.next().slideUp(100))})})},The4Kalles.wcInitSwitchLayout=function(){e("body").on("click",".wc-col-switch a",function(a){a.preventDefault();var l=e(this),i=l.data("col"),o=l.data("skey"),s=l.closest(".wc-col-switch"),n=e("#the4-content .products .product"),r=e(".products .grid-sizer"),c=e(".container_cat");t.hasClass("wcfmmp-store-page")&&(n=e("#wcfmmp-store .products .product"),c=e("#products-wrapper")),s.addClass("pe_none"),l.hasClass("active")||(c.removeClass("on_list_view_false").addClass("on_list_view_true"),"listt4"==i?c.removeClass("on_list_view_false").addClass("on_list_view_true"):c.removeClass("on_list_view_true").addClass("on_list_view_false"),s.find("a").removeClass("active"),l.addClass("active"),n.removeClass("col-md-2 col-md-3 col-md-4 col-md-6 col-lg-2 col-lg-3 col-lg-4 col-lg-6 col-6").addClass("col-md-"+i+" col-lg-"+i),r.removeClass("size-2 size-3 size-4 size-6 size-12").addClass("size-"+i),(e(".container_cat .products").hasClass("the4-masonry")||e("#products-wrapper .products").hasClass("the4-masonry"))&&The4Kalles.initMasonry(),e.ajax({url:THE4_AjaxURL,type:"POST",dataType:"json",data:{security_code:o,action:"the4_kalles_set_colunm_view",col:i},success:function(e){s.removeClass("pe_none")}}))})},The4Kalles.The4KallesShopAjaxFilter=function(){if("1"==THE4_Data_Js.ajax_shop&&0!=e(".container_cat").length&&void 0!==e.fn.pjax){e(document).on("pjax:beforeSend",function(e,t){}),e(document).on("pjax:timeout",function(e){e.preventDefault()}),e(document).on("pjax:error",function(e,t,a,l){console.log("pjax error "+a)}),e(document).on("pjax:start",function(l,i,o){e.magnificPopup.instance.isOpen&&e.magnificPopup.close(),t.addClass("ajax_loading"),a()}),e(document).on("pjax:end",function(a,l,i){t.removeClass("ajax_loading"),The4Kalles.initAjaxLoad(),The4Kalles.initMasonry(),The4Kalles.kalles_filter_color(),e(".price_slider_wrapper").length>0&&The4Kalles.init_price_filter()}),e(document).pjax(".nt_filter_block a, .is_pjax_item, .is_pjax > a, .result_clear a, .tagcloud .tag-cloud-link",".container_cat",{container:".container_cat",fragment:".container_cat",timeout:5e3,scrollTo:!1}),e(document).on("click",".widget_price_filter form .button",function(t){var a=e(".widget_price_filter form");return e.pjax({container:".container_cat",fragment:".container_cat",url:a.attr("action"),data:a.serialize(),timeout:5e3,scrollTo:!1}),!1});var a=function(){var t=e(".container_cat").offset().top-100;e("html, body").stop().animate({scrollTop:t},400)}}},The4Kalles.init_price_filter=function(){e("input#min_price, input#max_price").hide(),e(".price_slider, .price_label").show();var t=e(".price_slider_amount #min_price").data("min"),a=e(".price_slider_amount #max_price").data("max"),l=e(".price_slider_amount").data("step")||1,i=e(".price_slider_amount #min_price").val(),o=e(".price_slider_amount #max_price").val();e(".price_slider:not(.ui-slider)").slider({range:!0,animate:!0,min:t,max:a,step:l,values:[i,o],create:function(){e(".price_slider_amount #min_price").val(i),e(".price_slider_amount #max_price").val(o),e(document.body).trigger("price_slider_create",[i,o])},slide:function(t,a){e("input#min_price").val(a.values[0]),e("input#max_price").val(a.values[1]),e(document.body).trigger("price_slider_slide",[a.values[0],a.values[1]])},change:function(t,a){e(document.body).trigger("price_slider_change",[a.values[0],a.values[1]])}})},The4Kalles.The4KallesSortbyPicker=function(){0!=e(".cat_sortby_js").length&&(t.on("click","a.sortby_pick",function(a){a.preventDefault(),a.stopPropagation();var l=e(this).closest(".cat_sortby_js");e(l).hasClass("opended")?(e(l).removeClass("opended"),t.removeClass("sortby_opended")):(e(l).addClass("opended"),t.addClass("sortby_opended"))}),t.click(function(a){e(a.target).hasClass("sortby_pick")||(e(".cat_sortby_js.opended").removeClass("opended"),t.removeClass("sortby_opended"))}))},The4Kalles.kalles_filter_color=function(){if(e(".nt_filter_color.type-brand").length>0)e(".nt_filter_color").parent(".nt_filter_block").addClass("filter_block_brand");else if(e(".nt_filter_color").length>0){e(".nt_filter_color").parent(".nt_filter_block").addClass("filter_block_color")}},e(document).ready(function(){The4Kalles.wcInitSidebarFilter(),The4Kalles.wcInitSwitchLayout(),The4Kalles.The4KallesShopAjaxFilter(),The4Kalles.init_price_filter(),The4Kalles.The4KallesSortbyPicker(),The4Kalles.kalles_filter_color()})}(jQuery);